#!/usr/bin/env ruby

# vim: set tabstop=2 shiftwidth=2 softtabstop=2 cc=100;

require "geoloader"
require "terminal-table"
require "thor"

class GeoloaderCLI < Thor

  desc "load MANIFEST", "Load a YAML batch manifest"
  option "resque", :aliases => "q", :type => :boolean, :default => false
  def load(manifest)
    Geoloader::Routines.load(manifest, options[:resque])
  end

  desc "clear WORKSPACE", "Clear a workspace"
  def clear(workspace)
    Geoloader::Routines.clear(workspace)
  end

  desc "list", "List workspaces and asset counts"
  def list
    Geoloader::Routines.list
  end

  desc "work", "Start a Resque worker"
  def work
    Geoloader::Routines.work
  end

end

GeoloaderCLI.start(ARGV)
