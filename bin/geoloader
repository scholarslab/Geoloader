#!/usr/bin/env ruby

# vim: set tabstop=2 shiftwidth=2 softtabstop=2 cc=100;

require "geoloader"
require "terminal-table"
require "thor"

class GeoloaderCLI < Thor

  desc "geoloader load MANIFEST", "Load a YAML batch manifest"
  def load
    # TODO
    puts "load"
  end

  desc "geoloader clear WORKSPACE", "Clear a workspace"
  def clear(workspace)

    # Query for workspace counts.
    counts = Geoloader::Solr.new.get_workspace_counts

    # Pretty-print the table.
    puts Terminal::Table.new(
      :title    => "GEOLOADER",
      :headings => ["Workspace", "# Assets"],
      :rows     => counts
    )

  end

  desc "geoloader list", "List workspaces and asset counts"
  def list
    # TODO
    puts "list"
  end

  desc "geoloader work", "Start a Resque worker"
  def work
    # TODO
    puts "work"
  end

end

GeoloaderCLI.start(ARGV)
