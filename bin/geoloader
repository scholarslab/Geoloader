#!/usr/bin/env ruby

require 'rubygems'
require 'commander/import'
require 'geoloader'

program :version, '0.0.1'
program :description, 'Load GeoTIFFs and Shapefiles into Geonetwork, Geoserver, and PostgreSQL'

command :load do |c|
  c.syntax = 'geoloader load [filename]'
  c.summary = 'Load a Geotiff (.tif) or Shapefile (.shp).'
  c.action do |args, options|

    Geoloader.configure_from_yaml "~/.geoloader"

    case File.extname(args[0])
    when ".tif"
      loader = Geoloader::GeotiffLoader.new args[0]
      loader.work
    when ".shp"
      loader = Geoloader::ShapefileLoader.new args[0]
      loader.work
    end

  end
end
